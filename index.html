<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ArchViz 360 Viewer</title>

<script src="https://cdn.scaleflex.it/plugins/js-cloudimage-360-view/latest/js-cloudimage-360-view.min.js"></script>

<style>
body {
  margin: 0;
  background: #000;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
}

.viewer {
  width: 100%;
  max-width: 1280px;
  aspect-ratio: 16 / 9;
}
</style>
</head>

<body>

<div class="viewer">
  <div id="viewer360" class="cloudimage-360"></div>
</div>

<script>
const params = new URLSearchParams(window.location.search);
const project = params.get("project");
const view = params.get("view");

const bucket = "https://storage.googleapis.com/archviz-viewer-images";

if (!project || !view) {
  document.body.innerHTML = "<h1 style='color:white'>Missing project or view</h1>";
} else {

  const el = document.getElementById("viewer360");

  if (view === "exterior") {

    el.setAttribute("data-folder", `${bucket}/${project}/exterior/lowres/`);
    el.setAttribute("data-zoom-folder", `${bucket}/${project}/exterior/highres/`);
    el.setAttribute("data-amount", "120");

  } else {

    el.setAttribute("data-folder", `${bucket}/${project}/rooms/${view}/`);
    el.setAttribute("data-amount", "24");

  }

  el.setAttribute("data-filename", "{index}.jpg");
  el.setAttribute("data-index-zero-base", "false");
  el.setAttribute("data-drag-speed", "150");
  el.setAttribute("data-autoplay", "false");
  el.setAttribute("data-zoom", "3");
  el.setAttribute("data-fullscreen", "true");
  el.setAttribute("data-magnifier", "2");

  window.CI360.init();
}
</script>

</body>
</html>
